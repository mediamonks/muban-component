<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Refs | Muban</title>
    <meta name="generator" content="VuePress 1.8.2">
    
    <meta name="description" content="Writing components for server-rendered HTML">
    
    <link rel="preload" href="/muban/assets/css/0.styles.c2e1c844.css" as="style"><link rel="preload" href="/muban/assets/js/app.38f7e87e.js" as="script"><link rel="preload" href="/muban/assets/js/2.06b0796c.js" as="script"><link rel="preload" href="/muban/assets/js/16.b9200e8e.js" as="script"><link rel="preload" href="/muban/assets/js/5.05f07280.js" as="script"><link rel="prefetch" href="/muban/assets/js/10.d14ed3da.js"><link rel="prefetch" href="/muban/assets/js/11.8c7bde9f.js"><link rel="prefetch" href="/muban/assets/js/12.61d44a32.js"><link rel="prefetch" href="/muban/assets/js/13.8dd5cf62.js"><link rel="prefetch" href="/muban/assets/js/14.d537f9b0.js"><link rel="prefetch" href="/muban/assets/js/15.3a8681eb.js"><link rel="prefetch" href="/muban/assets/js/17.1d86e250.js"><link rel="prefetch" href="/muban/assets/js/18.68ff74e2.js"><link rel="prefetch" href="/muban/assets/js/19.b096606a.js"><link rel="prefetch" href="/muban/assets/js/20.cf32d357.js"><link rel="prefetch" href="/muban/assets/js/21.f0e8db43.js"><link rel="prefetch" href="/muban/assets/js/22.ed59f86b.js"><link rel="prefetch" href="/muban/assets/js/23.a30f80b7.js"><link rel="prefetch" href="/muban/assets/js/24.a03bc3dc.js"><link rel="prefetch" href="/muban/assets/js/25.0c065775.js"><link rel="prefetch" href="/muban/assets/js/26.87f27203.js"><link rel="prefetch" href="/muban/assets/js/27.96e8a80c.js"><link rel="prefetch" href="/muban/assets/js/28.2639b294.js"><link rel="prefetch" href="/muban/assets/js/29.dff7791a.js"><link rel="prefetch" href="/muban/assets/js/3.deed82c5.js"><link rel="prefetch" href="/muban/assets/js/30.373e9c86.js"><link rel="prefetch" href="/muban/assets/js/31.33ef1212.js"><link rel="prefetch" href="/muban/assets/js/4.f26baa3d.js"><link rel="prefetch" href="/muban/assets/js/6.b1f6c096.js"><link rel="prefetch" href="/muban/assets/js/7.c1317075.js"><link rel="prefetch" href="/muban/assets/js/8.9814c2a1.js"><link rel="prefetch" href="/muban/assets/js/9.242aa778.js">
    <link rel="stylesheet" href="/muban/assets/css/0.styles.c2e1c844.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/muban/" class="home-link router-link-active"><!----> <span class="site-name">Muban</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/muban/" class="nav-link">
  Home
</a></div><div class="nav-item"><a href="/muban/guide/" class="nav-link">
  Guide
</a></div><div class="nav-item"><a href="/muban/api/" class="nav-link router-link-active">
  Api
</a></div><div class="nav-item"><a href="/muban/changelog/" class="nav-link">
  Changelog
</a></div><div class="nav-item"><a href="/muban/research/" class="nav-link">
  Research
</a></div> <a href="https://github.com/mubanjs/muban" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/muban/" class="nav-link">
  Home
</a></div><div class="nav-item"><a href="/muban/guide/" class="nav-link">
  Guide
</a></div><div class="nav-item"><a href="/muban/api/" class="nav-link router-link-active">
  Api
</a></div><div class="nav-item"><a href="/muban/changelog/" class="nav-link">
  Changelog
</a></div><div class="nav-item"><a href="/muban/research/" class="nav-link">
  Research
</a></div> <a href="https://github.com/mubanjs/muban" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><a href="/muban/api/" aria-current="page" class="sidebar-link">Api</a></li><li><a href="/muban/api/app.html" class="sidebar-link">App</a></li><li><a href="/muban/api/component.html" class="sidebar-link">Component</a></li><li><a href="/muban/api/props.html" class="sidebar-link">Props</a></li><li><a href="/muban/api/refs.html" aria-current="page" class="active sidebar-link">Refs</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/muban/api/refs.html#ref-definition" class="sidebar-link">Ref definition</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/muban/api/refs.html#refelement" class="sidebar-link">refElement</a></li><li class="sidebar-sub-header"><a href="/muban/api/refs.html#refcollection" class="sidebar-link">refCollection</a></li><li class="sidebar-sub-header"><a href="/muban/api/refs.html#refcomponent" class="sidebar-link">refComponent</a></li><li class="sidebar-sub-header"><a href="/muban/api/refs.html#refcomponents" class="sidebar-link">refComponents</a></li></ul></li><li class="sidebar-sub-header"><a href="/muban/api/refs.html#ref-item" class="sidebar-link">Ref item</a></li></ul></li><li><a href="/muban/api/bindings.html" class="sidebar-link">Bindings</a></li><li><a href="/muban/api/hooks.html" class="sidebar-link">Hooks</a></li><li><a href="/muban/api/provide-inject.html" class="sidebar-link">Provide / Inject</a></li><li><a href="/muban/api/mhtml.html" class="sidebar-link">mhtml templates</a></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="refs"><a href="#refs" class="header-anchor">#</a> Refs</h1> <p>Refs have two stages, the definitions - which go inside your component definition, and the resolved
items - which you receive in your setup function, and use for bindings.</p> <h2 id="ref-definition"><a href="#ref-definition" class="header-anchor">#</a> Ref definition</h2> <p>The shape of the definition that you pass to the component is the following:</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token comment">// refs definition</span>
<span class="token keyword">type</span> <span class="token class-name">ComponentRefItem</span> <span class="token operator">=</span>
  <span class="token comment">// shortcut for element ref, will internally be turned into a `refElement()`</span>
  <span class="token operator">|</span> <span class="token builtin">string</span>
  <span class="token operator">|</span> <span class="token punctuation">{</span>
      <span class="token comment">// Different refs have their own type, to execute slightly different logic on them.</span>
      <span class="token keyword">type</span><span class="token operator">:</span> <span class="token string">'element'</span> <span class="token operator">|</span> <span class="token string">'collection'</span> <span class="token operator">|</span> <span class="token string">'component'</span> <span class="token operator">|</span> <span class="token string">'componentCollection'</span><span class="token punctuation">;</span>
      <span class="token comment">// The value of the `data-ref` attribute on the html element(s).</span>
      ref<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
      <span class="token comment">// Only used for element/component, and when true, it will log an error if the element</span>
      <span class="token comment">// doesn't exist in the DOM. Nothing will break, it's just that the bindings will not</span>
      <span class="token comment">// be executed.</span>
      isRequired<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">boolean</span><span class="token punctuation">;</span>
      <span class="token comment">// A function that will find the right HTMLElement(s) that should be used for the refs.</span>
      <span class="token comment">// When `type` is element or component, it returns a single HTMLElement or null.</span>
      <span class="token function-variable function">queryRef</span><span class="token operator">:</span> <span class="token punctuation">(</span>parent<span class="token operator">:</span> HTMLElement<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> HTMLElement <span class="token operator">|</span> <span class="token keyword">null</span> <span class="token operator">|</span> <span class="token builtin">Array</span><span class="token operator">&lt;</span>HTMLElement<span class="token operator">&gt;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</code></pre></div><p>However, you would never pass this by hand, but instead make use of the available helper
functions described below.</p> <p><strong>ignoreGuard</strong></p> <p>By default, only refs directly within a component can be selected. Refs from child components
are not accessible. All <code>ref</code> functions have an <code>ignoreGuard</code> option.</p> <p>When setting <code>ignoreGuard</code> to true, it disables the guarding behaviour, and allows
you to query any ref.</p> <h3 id="refelement"><a href="#refelement" class="header-anchor">#</a> refElement</h3> <p><code>refElement</code> selects a single DOM element that has the <code>data-ref</code> attribute set.</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">declare</span> <span class="token keyword">function</span> <span class="token function">refElement</span><span class="token punctuation">(</span>
  refIdOrQuery<span class="token operator">:</span> <span class="token builtin">string</span> <span class="token operator">|</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>parent<span class="token operator">:</span> HTMLElement<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> HTMLElement <span class="token operator">|</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  options<span class="token operator">?</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    isRequired<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">boolean</span><span class="token punctuation">;</span>
    ignoreGuard<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">boolean</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">)</span><span class="token operator">:</span> ComponentRefItemElement<span class="token punctuation">;</span>
</code></pre></div><h4 id="refidorquery"><a href="#refidorquery" class="header-anchor">#</a> refIdOrQuery</h4> <p><code>refId: string</code></p> <p><code>refQuery: (parent: HTMLElement) =&gt; HTMLElement | null)</code></p> <p>When passing a <code>string</code>, it's the value of the <code>data-ref</code> attribute on one of the HTMLElements
in the DOM.</p> <p>When passing a <code>function</code>, you can query your elements by using <code>parent.querySelector(...)</code> to
return a single element.</p> <p>Any elements that are queried are filtered against the component guard unless <code>options. ignoreGuard</code> is set to <code>true</code>.</p> <h4 id="options-isrequired"><a href="#options-isrequired" class="header-anchor">#</a> options.isRequired</h4> <p><code>isRequired?: boolean = true</code></p> <p>By default, all refs are marked as <strong>required</strong>, and will log errors in the console when they cannot
be found. If elements are optional, you can set <code>isRequired</code> to <code>false</code>, and by doing that, the type
becomes optional as well.</p> <h4 id="options-ignoreguard"><a href="#options-ignoreguard" class="header-anchor">#</a> options.ignoreGuard</h4> <p><code>ignoreGuard?: boolean = false</code></p> <p>When set to <code>true</code>, it disables the guarding behaviour, and allows you to query any ref of any child
component.</p> <p><strong>Example</strong></p> <!----> <div class="custom-block tip"><p class="custom-block-title">Shortcut</p> <p>Passing <code>'string'</code> is a quick shortcut for <code>refElement('string')</code>.</p></div> <h3 id="refcollection"><a href="#refcollection" class="header-anchor">#</a> refCollection</h3> <p><code>refCollection</code> selects one or more DOM elements that have the <code>data-ref</code> attribute set. If no
elements are found, the collection will be empty.</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">declare</span> <span class="token keyword">function</span> <span class="token function">refCollection</span><span class="token punctuation">(</span>
  refIdOrQuery<span class="token operator">:</span> <span class="token builtin">string</span> <span class="token operator">|</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>parent<span class="token operator">:</span> HTMLElement<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token builtin">Array</span><span class="token operator">&lt;</span>HTMLElement<span class="token operator">&gt;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  options<span class="token operator">?</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    minimumItemsRequired<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
    ignoreGuard<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">boolean</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">)</span><span class="token operator">:</span> ComponentRefItemCollection<span class="token punctuation">;</span>
</code></pre></div><p>In the <code>setup</code> function, a collection can be used to apply the same binding to multiple items,
or to loop over in a mapping function and specify a different binding based on each individual
element or index in the collection.</p> <h4 id="refidorquery-2"><a href="#refidorquery-2" class="header-anchor">#</a> refIdOrQuery</h4> <p><code>refId: string</code></p> <p><code>refQuery: (parent: HTMLElement) =&gt; Array&lt;HTMLElement&gt;)</code></p> <p>When passing a <code>string</code>, it's the value of the <code>data-ref</code> attribute on one or multiple HTMLElements
in the DOM.</p> <p>When passing a <code>function</code>, you can query your elements by using <code>parent.querySelectorAll(...)</code>
to return one or multiple elements.</p> <p>Any elements that are queried are filtered against the component guard unless <code>options. ignoreGuard</code> is set to <code>true</code>.</p> <h4 id="options-minimumitemsrequired"><a href="#options-minimumitemsrequired" class="header-anchor">#</a> options.minimumItemsRequired</h4> <p><code>minimumItemsRequired?: number = 0</code></p> <p>By default, the returned collection can be empty, and is thus optional by default. By setting
<code>minimumItemsRequired</code> to a specific value, an error is thrown when the collection contains fewer
items.</p> <h4 id="options-ignoreguard-2"><a href="#options-ignoreguard-2" class="header-anchor">#</a> options.ignoreGuard</h4> <p><code>ignoreGuard?: boolean = false</code></p> <p>When set to <code>true</code>, it disables the guarding behaviour, and allows you to query any ref of any child
component.</p> <p><strong>Example</strong></p> <!----> <h3 id="refcomponent"><a href="#refcomponent" class="header-anchor">#</a> refComponent</h3> <p><code>refComponent</code> selects a single DOM element that either has the <code>data-component</code> attribute match
the one from the passed Component, or has the <code>data-ref</code> attribute set when that is provided in
the options.</p> <p>After selecting the DOM element, it will create a new component instance for that element.</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">declare</span> <span class="token keyword">function</span> <span class="token function">refComponent</span><span class="token punctuation">(</span>
  component<span class="token operator">:</span> ComponentFactory <span class="token operator">|</span> <span class="token builtin">Array</span><span class="token operator">&lt;</span>ComponentFactory<span class="token operator">&gt;</span><span class="token punctuation">,</span>
  options<span class="token operator">?</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    ref<span class="token operator">:</span> <span class="token builtin">string</span> <span class="token operator">|</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>parent<span class="token operator">:</span> HTMLElement<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> HTMLElement <span class="token operator">|</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    isRequired<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">boolean</span><span class="token punctuation">;</span>
    ignoreGuard<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">boolean</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">)</span><span class="token operator">:</span> ComponentRefItemComponent<span class="token punctuation">;</span>
</code></pre></div><h4 id="component"><a href="#component" class="header-anchor">#</a> component</h4> <p><code>component: ComponentFactory | Array&lt;ComponentFactory&gt;</code></p> <p>One or multiple components that will be created for this ref. In addition to almost all HTML
bindings, a component ref also allows you to bind against child component props, updating their
values when things change, or providing callback functions that can be called.</p> <p>If <code>options.refIdOrQuery</code> is not passed, it will search for the first occurrence of the
<code>data-component</code> matching the passed component(s).</p> <p>If you pass an <code>Array</code> of multiple components, it will use the first one it finds. The most
common use case is by having one element with a specific <code>data-ref</code> that should match one of the
passed components.</p> <p>When doing that, only the component props that exists on all the passed components can be used
to bind against.</p> <h4 id="options-ref"><a href="#options-ref" class="header-anchor">#</a> options.ref</h4> <p><code>ref: string</code></p> <p><code>ref: (parent: HTMLElement) =&gt; HTMLElement | null)</code></p> <p>If you have multiple component elements, and the ref should target a specific one, the
<code>ref</code> can be used. Or if you just want to be more strict about things, to make sure it
doesn't break in the future. Otherwise, if you just have a single child component, you can omit
the ref, and it still will be able to find the element based on the <code>data-component</code> attribute.</p> <p>When passing a <code>string</code>, it's the value of the <code>data-ref</code> attribute on one of the HTMLElements
in the DOM.</p> <p>When passing a <code>function</code>, you can query your elements by using <code>parent.querySelector(...)</code> to
return a single element.</p> <p>Any elements that are queried are filtered against the component guard unless <code>options. ignoreGuard</code> is set to <code>true</code>.</p> <p>Any elements that are queried are also filtered with the <code>data-component</code> attribute against the
<code>displayName</code> of the passed <code>ComponentFactory</code>.</p> <h4 id="options-isrequired-2"><a href="#options-isrequired-2" class="header-anchor">#</a> options.isRequired</h4> <p><code>isRequired?: boolean = true</code></p> <p>By default, all refs are marked as <strong>required</strong>, and will log errors in the console when they cannot
be found. If elements are optional, you can set <code>isRequired</code> to <code>false</code>, and by doing that, the type
becomes optional as well.</p> <h4 id="options-ignoreguard-3"><a href="#options-ignoreguard-3" class="header-anchor">#</a> options.ignoreGuard</h4> <p><code>ignoreGuard?: boolean = false</code></p> <p>When set to <code>true</code>, it disables the guarding behaviour, and allows you to query any ref of any child
component.</p> <p><strong>Example</strong></p> <!----> <h3 id="refcomponents"><a href="#refcomponents" class="header-anchor">#</a> refComponents</h3> <p><code>refComponents</code> selects one or more DOM elements that either have the <code>data-component</code> attribute
match the one from the passed Component, or have the <code>data-ref</code> attribute set when that is
provided in the options. If no elements are found, the collection will be empty.</p> <p>After selecting the DOM elements, it will create a new component instance for each of them.</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">declare</span> <span class="token keyword">function</span> <span class="token function">refComponents</span><span class="token punctuation">(</span>
  component<span class="token operator">:</span> ComponentFactory<span class="token punctuation">,</span>
  options<span class="token operator">?</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    ref<span class="token operator">:</span> <span class="token builtin">string</span> <span class="token operator">|</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>parent<span class="token operator">:</span> HTMLElement<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token builtin">Array</span><span class="token operator">&lt;</span>TMLElement<span class="token operator">&gt;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    minimumItemsRequired<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
    ignoreGuard<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">boolean</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">)</span><span class="token operator">:</span> ComponentRefItemComponentCollection<span class="token punctuation">;</span>
</code></pre></div><h4 id="component-2"><a href="#component-2" class="header-anchor">#</a> component</h4> <p><code>component: ComponentFactory</code></p> <p>The component that will be created for this ref. In addition to almost all HTML bindings, a
component ref also allows you to bind against child component props, updating their values when
things change, or providing callback functions that can be called.</p> <p>If <code>options.ref</code> is not passed, it will search for the first occurrence of the
<code>data-component</code> matching the passed component.</p> <h4 id="options-ref-2"><a href="#options-ref-2" class="header-anchor">#</a> options.ref</h4> <p><code>ref: string</code></p> <p><code>ref: (parent: HTMLElement) =&gt; HTMLElement | null)</code></p> <p>If you have multiple component elements, and the ref should target specific ones, the
<code>ref</code> can be used. Or if you just want to be more strict about things, to make sure it
doesn't break in the future. Otherwise, if you just want to target all elements of this component,
you can omit the ref, and it still will use all element based on the <code>data-component</code> attribute.</p> <p>When passing a <code>string</code>, it's the value of the <code>data-ref</code> attribute on the HTMLElements in the DOM.</p> <p>When passing a <code>function</code>, you can query your elements by using <code>parent.querySelectorAll(...)</code> to
return multiple elements.</p> <p>Any elements that are queried are filtered against the component guard unless <code>options. ignoreGuard</code> is set to <code>true</code>.</p> <p>Any elements that are queried are also filtered with the <code>data-component</code> attribute against the
<code>displayName</code> of the passed <code>ComponentFactory</code>.</p> <h4 id="options-minimumitemsrequired-2"><a href="#options-minimumitemsrequired-2" class="header-anchor">#</a> options.minimumItemsRequired</h4> <p><code>minimumItemsRequired?: number = 0</code></p> <p>By default, the returned collection can be empty, and is thus optional by default. By setting
<code>minimumItemsRequired</code> to a specific value, an error is thrown when the collection contains fewer
items.</p> <h4 id="options-ignoreguard-4"><a href="#options-ignoreguard-4" class="header-anchor">#</a> options.ignoreGuard</h4> <p><code>ignoreGuard?: boolean = false</code></p> <p>When set to <code>true</code>, it disables the guarding behaviour, and allows you to query any ref of any child
component.</p> <p><strong>Example</strong></p> <!----> <h2 id="ref-item"><a href="#ref-item" class="header-anchor">#</a> Ref item</h2> <p>Ref items are &quot;container objects&quot; around the resolved ref definitions to be used in the <code>setup</code>
function of the component.</p> <p>They are mainly used in the different binding helpers, but contains some additional information
about the specific refs that could be useful in some situations.</p> <p>The <code>type</code> of each <code>ref</code> is inferred from the input you pass, so the properties you can access
is different between elements and components, or single items vs collections.</p> <p>The public API for each type of ref can be seen below (note that some internal fields have been
omitted here).</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">type</span> <span class="token class-name">ElementRef</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
  element<span class="token operator">:</span> HTMLElement <span class="token operator">|</span> <span class="token keyword">undefined</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">type</span> <span class="token class-name">CollectionRef<span class="token operator">&lt;</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">// this is a function, and has refs inside, so causes `watch` or `watchEffect` to re-execute </span>
  <span class="token comment">// when the DOM updates and the items inside the collection change </span>
  <span class="token function-variable function">getElements</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token builtin">Array</span><span class="token operator">&lt;</span>HTMLElement<span class="token operator">&gt;</span><span class="token punctuation">;</span>
  <span class="token comment">// nested refs for each single individual element</span>
  <span class="token function-variable function">getRefs</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token builtin">Array</span><span class="token operator">&lt;</span>ElementRef<span class="token operator">&gt;</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">type</span> <span class="token class-name">ComponentRef</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
  component<span class="token operator">:</span> ComponentApi <span class="token operator">|</span> <span class="token keyword">undefined</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">type</span> <span class="token class-name">ComponentsRef</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">// this is a function, and has refs inside, so causes `watch` or `watchEffect` to re-execute </span>
  <span class="token comment">// when the DOM updates and the items inside the collection change </span>
  <span class="token function-variable function">getComponents</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token builtin">Array</span><span class="token operator">&lt;</span>ComponentApi<span class="token operator">&gt;</span><span class="token punctuation">;</span>
  <span class="token comment">// nested refs for each single individual component</span>
  <span class="token function-variable function">getRefs</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token builtin">Array</span><span class="token operator">&lt;</span>ComponentRef<span class="token operator">&gt;</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><p>As you can see, all 4 have a reference to the actual item(s) that they have selected as <code>element</code>,
<code>getElements()</code>, <code>component</code> or <code>getComponents()</code>. The two collection refs have access to the
&quot;item&quot; <code>refs</code>, a list of &quot;container refs&quot; around each item in the collection, which could be
useful when applying  the individual bindings to each item.</p> <p><strong>Example</strong></p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token function">defineComponent</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  refs<span class="token operator">:</span> <span class="token punctuation">{</span>
    singleElement<span class="token operator">:</span> <span class="token function">refElement</span><span class="token punctuation">(</span><span class="token string">'single-element'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    elementCollection<span class="token operator">:</span> <span class="token function">refCollection</span><span class="token punctuation">(</span><span class="token string">'element-collection'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    singleComponent<span class="token operator">:</span> <span class="token function">refElement</span><span class="token punctuation">(</span>Component<span class="token punctuation">,</span> <span class="token string">'single-element'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    componentCollection<span class="token operator">:</span> <span class="token function">refElement</span><span class="token punctuation">(</span>Component<span class="token punctuation">,</span> <span class="token string">'element-collection'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">{</span> props<span class="token punctuation">,</span> refs <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    refs<span class="token punctuation">.</span>singleElement<span class="token punctuation">.</span>element<span class="token punctuation">;</span> <span class="token comment">// HTMLElement</span>
    refs<span class="token punctuation">.</span>elementCollection<span class="token punctuation">.</span><span class="token function">getElements</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Array&lt;HTMLElement&gt;</span>

    refs<span class="token punctuation">.</span>singleComponent<span class="token punctuation">.</span>component<span class="token punctuation">;</span> <span class="token comment">// ComponentApi</span>
    refs<span class="token punctuation">.</span>singleComponent<span class="token punctuation">.</span>component<span class="token punctuation">.</span>props<span class="token punctuation">;</span> <span class="token comment">// Access the component props, useful for intial state</span>
    refs<span class="token punctuation">.</span>componentCollection<span class="token punctuation">.</span><span class="token function">getComponents</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Array&lt;ComponentApi&gt;</span>
    
    <span class="token keyword">return</span> <span class="token punctuation">[</span>
      <span class="token function">bind</span><span class="token punctuation">(</span>refs<span class="token punctuation">.</span>singleElement<span class="token punctuation">,</span> <span class="token punctuation">{</span> text<span class="token operator">:</span> <span class="token string">'label'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">// bind to single element</span>
      <span class="token function">bind</span><span class="token punctuation">(</span>refs<span class="token punctuation">.</span>elementCollection<span class="token punctuation">,</span> <span class="token punctuation">{</span> text<span class="token operator">:</span> <span class="token string">'label'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">// bind to all elements in the collection</span>
      
      <span class="token comment">// bind to each ref individually</span>
      <span class="token operator">...</span>refs<span class="token punctuation">.</span>elementCollection<span class="token punctuation">.</span>refs<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span>ref<span class="token punctuation">,</span> index<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">bind</span><span class="token punctuation">(</span>ref<span class="token punctuation">,</span> <span class="token punctuation">{</span> text<span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">item </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>index<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token comment">// but simpler</span>
      <span class="token operator">...</span><span class="token function">bindMap</span><span class="token punctuation">(</span>refs<span class="token punctuation">.</span>elementCollection<span class="token punctuation">,</span> <span class="token punctuation">(</span>ref<span class="token punctuation">,</span> index<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token punctuation">{</span> text<span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">item </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>index<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      

      <span class="token comment">// bind to single component, or to all components int the collection</span>
      <span class="token function">bind</span><span class="token punctuation">(</span>refs<span class="token punctuation">.</span>component<span class="token punctuation">,</span> <span class="token punctuation">{</span> someProps<span class="token operator">:</span> <span class="token string">'value'</span><span class="token punctuation">,</span> <span class="token function-variable function">onSomethingHappens</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Yo'</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token function">bind</span><span class="token punctuation">(</span>refs<span class="token punctuation">.</span>elementCollection<span class="token punctuation">,</span> <span class="token punctuation">{</span> someProps<span class="token operator">:</span> <span class="token string">'value'</span><span class="token punctuation">,</span> <span class="token function-variable function">onSomethingHappens</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Yo'</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      
      <span class="token comment">// bind to each ref individually</span>
      <span class="token operator">...</span>refs<span class="token punctuation">.</span>singleComponent<span class="token punctuation">.</span>refs<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span>ref<span class="token punctuation">,</span> index<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">bind</span><span class="token punctuation">(</span>ref<span class="token punctuation">,</span> <span class="token punctuation">{</span> itemIndex<span class="token operator">:</span> index <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token comment">// but simpler</span>
      <span class="token operator">...</span><span class="token function">bindMap</span><span class="token punctuation">(</span>refs<span class="token punctuation">.</span>componentCollection<span class="token punctuation">,</span> <span class="token punctuation">(</span>ref<span class="token punctuation">,</span> index<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token punctuation">{</span> itemIndex<span class="token operator">:</span> index <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/muban/api/props.html" class="prev">
        Props
      </a></span> <span class="next"><a href="/muban/api/bindings.html">
        Bindings
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/muban/assets/js/app.38f7e87e.js" defer></script><script src="/muban/assets/js/2.06b0796c.js" defer></script><script src="/muban/assets/js/16.b9200e8e.js" defer></script><script src="/muban/assets/js/5.05f07280.js" defer></script>
  </body>
</html>
